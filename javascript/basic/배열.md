# 배열
자바스크립트에서 배열의 사용, 주의사항, 최적화 기법, 등에 관한 내용

자바스크립트에서 배열은 객체의 한 종류로 프로퍼티들이 순서를 갖는 객체로 생각하면된다.

일반 객체와 달리 자바스크립트 엔진에서는 배열을 특수하게 관리하여 배열객체로 사용하기 위해서는 일반 객체와 달리 몇가지 주의해서 사용해야된다는 점이 있다.

## 목차
- [선언](#선언)
- [내부 동작 원리](#내부-동작-원리)
- [참고링크](#참고링크)

## 선언

``` javascript
const arr = new Array();
const arr = [];

const arr = [1,2,3]; //선언과 동시에 초기화 가능

const arr = ['string', 1, function() {}]; //다양한 자료형으로 선언 가능
```

## 내부 동작 원리
배열은 객체 자료형이지만 객체의 특수한 형태로 동작한다. 배열은 인접한 메모리 공간에 차례로 저장해 연산 속도를 높인다.

내가 알고 있는 배열이라면 배열 선언시 고정된 일정길이의 메모리를 할당하여 그 안에서 차례로 데이터를 삽입하는 구조이다. 

배열이 데이터 접근에 빠른 이유도 시작 주소값에서 데이터의 크기 만큼 포인터를 이동하는 간단한 수학 연산 작업이기 때문이다.

하지만 자바스크립트에서는 linked list형태로 구현되어 있어 무조건 첫 노드의 주소값으로 부터 원하는 데이터가 있는 노드까지 탐색하여 가야하여 일반적인 배열에 비해 성능이 느릴수밖에 없다.

다행이도 최근에는 성능면 향상이 있어 JIT에서 엔진 내부적으로 내가 알고 있는 배열 처럼 최적화 작업을 한다. 다만 개발자가 배열의 사용에 있어 성능을 고려하여 작성해야된다는 점은 변함이 없다.

### 배열의 잘못된 사용
다만 아래 예시 처럼 배열을 일반 객체처럼 다룰 경우 자바스크립트 엔진이 배열을 일반 객체 처럼 다루기 때문에 성능상 이점을 잃게 된다.

``` javascript
const arr = [];

arr[99999] = 1; //배열 길이보다 휠씬더 큰 인덱스에 값을 할당할 경우

arr.age = 29; //배열도 객체이기 때문에 동작에 문제는 없지만 배열 성능 최적화 이점을 잃게됨

//0과 1000 사이를 비워두고 선언한 경우
arr[0] = 1;
arr[1000] = 2;

//인덱스를 역순으로 저장하는 경우
arr[10] = 1;
arr[9] = 2; 
```

### 배열 최적화를 위한 방법
배열 선언시 같은 데이터 타입으로만 선언하기

``` javascript
//GOOD
const arr = [1,2,3,4,5];//동일한 데이터 타입을 갖는 경우 각 값을 순차적으로 메모리에 할당한다.

//BAD
const arr = ['string',2,3,4,5];//동일한 데이터 타입이 아니여서 비연속적으로 메모리에 할당된다.
```

TypeArray 사용하기


``` javascript
```


## 참고링크
- [Mozilla 배열 설명(한글)](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array)
- [Mozilla Type Array 설명(한글)](https://developer.mozilla.org/ko/docs/Web/JavaScript/Typed_arrays)